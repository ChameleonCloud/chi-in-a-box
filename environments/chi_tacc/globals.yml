---

# Basics
docker_namespace: "kolla"
docker_registry_username: "kolla"
docker_registry: "docker.chameleoncloud.org"
kolla_base_distro: "centos"
kolla_install_type: "source"
virtualenv: "/etc/ansible/venv"
pip_virtualenv: "/etc/ansible/venv"
ansible_python_interpreter: "/etc/ansible/venv/bin/python"

#TODO what?
admin_username: "admin"
admin_project_name: "openstack"

# Docker image tag to use for deployed containers
openstack_release: "chameleoncloud-ocata"
#openstack_logging_debug: "True"

# Network configuration
kolla_internal_vip_address: "10.20.111.241"
kolla_external_vip_address: "129.114.97.101"
kolla_external_fqdn: "chi.tacc.chameleoncloud.org"

#TODO (hammock) move to host_vars?
kolla_external_vip_interface: "em2"
api_interface: "em1"
network_interface: "em1"

# Site & Region configuration
openstack_region_name: "CHI@TACC"
openstack_keystone_auth_uri: "https://chi.tacc.chameleoncloud.org:5000"
openstack_keystone_auth_url: "https://chi.tacc.chameleoncloud.org:5000/v3"
chameleon_site_name: "tacc"
openstack_interface: "public"
keystone_admin_username: "admin"
keystone_admin_project_name: "openstack"
jenkins_slave_name: ansible-tacc-prod
jenkins_slave_secret: # TODO
prometheus_alertmanager_hostname: alert.tacc.chameleoncloud.org

# External MariaDB config
enable_mariadb: "no"
database_address: "10.20.111.249"
use_preconfigured_databases: "yes"

# Kolla sidecar/support containers
enable_chrony: "no"
enable_fluentd: "yes"
enable_central_logging: "yes"
enable_memcached: "yes"

# External RabbitMQ
enable_rabbitmq: "no"
notify_transport_url: "rabbit://{{rabbitmq_user}}:{{ rabbitmq_password }}@10.20.111.249:{{ rabbitmq_port }}"
rpc_transport_url: "{{ notify_transport_url }}"

# External Redis
redis_address: "10.20.111.249"

# Blazar
enable_blazar: "yes"
blazar_database_address: "{{ database_address }}"
blazar_minutes_before_end_lease: 2880 # When to send lease notification email
blazar_default_max_lease_duration: 604800 # 7 days
blazar_usage_db_host: "chi.uc.chameleoncloud.org"
blazar_usage_default_allocated: 200000.0
blazar_usage_project_exemptions:
  - Chameleon
  - admin
  - openstack
  - maintenance

# Glance
enable_glance: "no"
glance_file_datadir_volume: "/var/lib/glance"
#glance_upgrading: False
# TODO [jca-2019-01-29]: remove this when we are on Rocky.
# Override 'disabled' state of Glance Registry. This service was deprecated
# but we still need to include it for Ocata.
glance_services:
  glance-registry:
    enabled: true

# HAProxy
enable_haproxy: "yes"
kolla_enable_tls_external: "yes"
kolla_external_fqdn_cert: "{{ node_custom_config }}/certificates/{{ kolla_external_fqdn }}.pem"
kolla_external_fqdn_cacert: "{{ node_custom_config }}/certificates/{{ kolla_external_fqdn }}-interm.cer"
keepalived_virtual_router_id: "54"

# Heat
enable_heat: "yes"

# Horizon
enable_horizon: "yes"
enable_horizon_blazar: "yes"
enable_horizon_ironic: "yes"
horizon_keystone_url: "https://chi.tacc.chameleoncloud.org:5000"
horizon_help_url: "https://chameleoncloud.readthedocs.io/en/latest/technical/baremetal.html"
enable_horizon_chameleon_websso: "yes"
horizon_chameleon_websso_host: "https://chameleoncloud.org"
horizon_regions:
  - region_name: "{{ openstack_region_name }}"
    chameleon_site_name: "{{ chameleon_site_name }}"
    blazar_database_host: "{{ database_address }}"
    blazar_database_name: "blazar"
    blazar_database_port: "3306"
    blazar_database_user: "blazar"
    blazar_database_password: "{{ blazar_database_password }}"


# Ironic
enable_ironic: "no"
ironic_provisioning_network: 54cdc54f-8050-47c8-bb2c-7f810b8d512e
ironic_cleaning_network: "{{ ironic_provisioning_network }}"
ironic_image_cache_size: 20480 # MB
ironic_pxe_append_params: nofb nomodeset vga=normal console=tty0 console=ttyS0,9600 systemd. journald.forward_to_console=yes

# Keystone
enable_keystone: "yes"
#fernet_token_expiry: 172800 # Effectively disables fernet rotation cron job

# Nova
enable_nova: "no"
enable_nova_serialconsole_proxy: "yes"
nova_compute_virt_type: "none"
# We are not using any VNC consoles; the serialproxy is not considered a 'nova_console'
nova_console: "none"
# We override the endpoints to not include %(tenant_id)s placeholder.
# Blazar in particular needs this to not be scoped to the tenant because when
# it tries to perform actions on behalf of a user, it uses a different tenant
# id (its own).
nova_admin_endpoint: "{{ admin_protocol }}://{{ kolla_internal_fqdn }}:{{ nova_api_port }}/v2.1"
nova_internal_endpoint: "{{ internal_protocol }}://{{ kolla_internal_fqdn }}:{{ nova_api_port }}/v2.1"
nova_public_endpoint: "{{ public_protocol }}://{{ kolla_external_fqdn }}:{{ nova_api_port }}/v2.1"
nova_keystone_user: "nova"
instance_metrics_writer_username: instance_metrics_writer

# Neutron
enable_neutron: "yes"
enable_openvswitch: "no"
neutron_bridge_name: br-p5p2,br-ex,br-exogeni,br-scinet
neutron_external_interface: p5p2,p5p1,br-p5p2,br-p5p2
neutron_ovs_bridge_mappings: physnet1:br-p5p2,public:br-ex,exogeni:br-exogeni,scinet:br-scinet

# TODO [jca 2019-01-29]: remove this when we can take advantage of this
# component, which was introduced after Ocata.
enable_ironic_neutron_agent: "no"
chameleon_switch_dell_username: chamadm
chameleon_switch_fx2_username: root
# Enable notifications for Experiment Precis
neutron_notification_topics:
  - name: "notifications"
    enabled: "yes"
neutron_type_drivers: flat,vlan
neutron_tenant_network_types: vlan
neutron_network_vlan_ranges: scinet:1999:1999,physnet1:2000:2010,physnet1:2013:2020,physnet1:2023:2499,exogeni:3500:3500,exogeni:3504:3505,exogeni:3507:3508
neutron_ml2_generic_switch_configs:
  - name: roc-be24-sw1 # m01
    device_type: netmiko_dell_force10
    ip: 172.26.102.28
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: moonshot-sa # moonshot
    device_type: netmiko_hp_comware
    ip: 172.16.110.46
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: roc-bc24-sw1 # c01
    device_type: netmiko_dell_force10
    ip: 172.26.102.98
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: roc-be26-sw1 # c02
    device_type: netmiko_dell_force10
    ip: 172.26.102.87
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: c02-f1s1 # c02-f1s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.10
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: c02-f2s1 # c02-f2s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.12
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: roc-bd26-sw1 # c03
    device_type: netmiko_dell_force10
    ip: 172.26.102.89
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: c03-f1s1 # c03-f1s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.14
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: c03-f2s1 # c03-f2s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.16
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: roc-bc26-sw1 # c04
    device_type: netmiko_dell_force10
    ip: 172.26.102.91
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: c04-f1s1 # c04-f1s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.18
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: c04-f2s1 # c04-f2s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.20
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: roc-be33-sw1 # c05
    device_type: netmiko_dell_force10
    ip: 172.26.102.83
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: c05-f1s1 # c05-f1s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.22
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: c05-f2s1 # c05-f2s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.24
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: roc-bd33-sw1 # c06
    device_type: netmiko_dell_force10
    ip: 172.26.102.80
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: c06-f1s1 # c06-f1s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.26
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: c06-f2s1 # c06-f2s1
    device_type: fnioa_netmiko_dell_force10
    ip: 172.16.110.28
    username: "{{ chameleon_switch_fx2_username }}"
    password: "{{ chameleon_switch_fx2_password }}"
  - name: roc-bc35-sw1 # c10
    device_type: netmiko_dell_force10
    ip: 172.26.102.86
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
  - name: roc-bb35-sw1 # c11
    device_type: netmiko_dell_force10
    ip: 172.26.102.78
    username: "{{ chameleon_switch_dell_username }}"
    password: "{{ chameleon_switch_dell_password }}"
## c07
#  - name: roc-bc33-sw1]
#    device_type: netmiko_dell_force10
#    ip: 172.26.102.82
# c12
  - name: roc-ax35-sw1
    device_type: corsa_dp2100
    #switchIP = roc-ax35-sw1.net.tacc.utexas.edu
    switchIP: 172.26.102.111
    token: "{{ chameleon_switch_corsa2_token }}"
    VFCType: openflow
    defaultControllerIP: 172.26.102.114
    defaultControllerPort: 6653
    defaultVFCRes: 1
    defaultVFCName: UNNAMED
    uplink_ports: 33
    provisioningControllerIP: 172.26.102.114
    provisioningControllerPort: 6653
    provisioningVLAN: 2000
    provisioningVFCType: l2-vpn
    controllerNamespace: of-mgt
    chameleon-corsa2: 37
    VFCHost: True
    # Shared non-BYOC VFC
    sharedNonByocVFC: br63
    sharedNonByocVLAN: 2000:2499
    sharedNonByocProvider: physnet1
    # Mappings of physical ports to OpenFlow port numbers
    'P 1' : 101
    'P 2' : 102
    'P 3' : 103
    'P 4' : 104
    'P 5' : 105
    'P 6' : 106
    'P 7' : 107
    'P 8' : 108
    'P 9' : 109
    'P 10': 110
    'P 11': 111
    'P 12': 112
    'P 13': 113
    'P 14': 114
    'P 15': 115
    'P 16': 116
    'P 17': 117
    'P 18': 118
    'P 19': 119
    'P 20': 120
    'P 21': 121
    'P 22': 122
    'P 23': 123
    'P 24': 124
    'P 25': 125
    'P 26': 126
    'P 27': 127
    'P 28': 128
    'P 29': 129
    'P 30': 130
    'P 31': 131
    'P 32': 132

# Others
enable_cinder: "no"
enable_gnocchi: "no"
enable_grafana: "no"
enable_swift: "no"
